### QTextBrowser 实现每行不同风格文字

在本项目中，QTextBrowser用来打印所有的聊天信息，而不同的客户端会进行不同的个性化设置，这需要在聊天窗口得以体现。

再QTextBrowser中实现不同风格，有两种方式：

1. 由于在QTextBrowser中可以内嵌html元素，因此可以实现不同风格文字的打印。

2. 对QTextBrowser字体的任何修改，都是修改之后加入的信息，不会影响前面的信息，因此我们也可以直接对QTextBrowser进行设置。

#### 颜色不同

参考：https://blog.csdn.net/u010687717/article/details/101281121

使用 `<font>` 元素中的 `color` 属性即可设置。

![image-20220524221925436](D:\Horb7\QtWork\images\image-20220524221925436.png)

![image-20220524221945689](D:\Horb7\QtWork\images\image-20220524221945689.png)

这样我们还需要对数字进行16进制编码，比较麻烦，我们采用第二种方法。

注意QJson对象不能插入QColor对象，因此可以将三原色rgb用三个int对象插入到Json中，在解码时再转化为QColor即可。

![image-20220524223930289](D:\Horb7\QtWork\images\image-20220524223930289.png)

![image-20220524223937719](D:\Horb7\QtWork\images\image-20220524223937719.png)

#### 字体加粗

同样使用第二种方法，把字体设置为粗体。

由于QTextBrowser不存在直接设置粗体的方法，我们可以在类中定义字体的状态 `is_bold` 记录当前是否为粗体，在编码时插入到 QJson 中即可，然后在解码时，提取 QTextBrowser 的字体，改为粗体再将其设置为 QT而心痛Browser 的字体。

需要注意的是，由于 Server 端的消息也需要打印，而这时不需要解码，因此还要对其进行额外操作，在点击按钮时，设置粗体。

**但是，粗体在QTextBroswer中只能全体增加，而且 Html 标签的 Font 不存在设置粗体的属性，因此不能个性化设置。**